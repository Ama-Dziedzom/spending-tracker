(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33451,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(20315),i=e.i(47163),c=e.i(75254);let r=(0,c.default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),n=(0,c.default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),d=(0,c.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),l=(0,c.default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var o=e.i(17927);function x({transaction:e,isOpen:c,onClose:x,onUpdate:h}){let[m,p]=(0,t.useState)(e?.category||"Other"),[u,b]=(0,t.useState)(!1),[g,f]=(0,t.useState)(!1);if((0,t.useEffect)(()=>{e&&(p(e.category),f(!1))},[e]),!c||!e)return null;e.type;let y=m!==e.category,j=async()=>{if(!y)return void x();if(b(!0),(0,o.isSupabaseConfigured)())try{let{error:a}=await o.supabase.from("transactions").update({category:m}).eq("id",e.id);if(a)throw a}catch(e){console.error("Error updating transaction:",e),b(!1);return}f(!0),h?.({...e,category:m}),setTimeout(()=>{b(!1),x()},500)};return(0,a.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-end justify-center sm:items-center p-0 sm:p-4",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-zinc-950/40 backdrop-blur-sm transition-opacity",onClick:x}),(0,a.jsx)("div",{className:"relative w-full max-w-lg bg-white dark:bg-zinc-950 rounded-t-[40px] sm:rounded-[40px] overflow-hidden shadow-2xl animate-fade-in-up",children:(0,a.jsxs)("div",{className:"p-8 pb-12 space-y-10",children:[(0,a.jsx)("div",{className:"w-12 h-1 bg-zinc-100 dark:bg-zinc-800 rounded-full mx-auto -mt-2 mb-4 sm:hidden"}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-6",children:[(0,a.jsx)("div",{className:"w-20 h-20 rounded-full bg-zinc-50 dark:bg-zinc-900 flex items-center justify-center border border-zinc-100 dark:border-zinc-800 shadow-sm transition-transform hover:scale-105 duration-300",children:(0,a.jsx)(n,{className:"w-10 h-10 text-zinc-900 dark:text-white"})}),(0,a.jsxs)("div",{className:"text-center space-y-1",children:[(0,a.jsx)("p",{className:"text-[17px] font-medium text-zinc-400",children:"Transaction details"}),(0,a.jsxs)("h2",{className:"text-[40px] font-bold tracking-tight",children:[(0,a.jsx)("span",{className:"text-[28px] align-top mr-1 font-semibold",children:s.CURRENCY_SYMBOL}),Math.abs(e.amount).toLocaleString("en-GH",{minimumFractionDigits:2})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-8 border-t border-zinc-50 dark:border-zinc-900 pt-8",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-[14px] font-medium text-zinc-400",children:"Date"}),(0,a.jsx)("p",{className:"text-[16px] font-bold",children:(0,i.formatFriendlyDate)(e.transaction_date)})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-[14px] font-medium text-zinc-400",children:"Merchant/Source"}),(0,a.jsx)("p",{className:"text-[16px] font-bold truncate",children:e.description||"Unknown"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-[14px] font-medium text-zinc-400",children:"Category"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(s.CATEGORIES).map(([e,t])=>(0,a.jsxs)("button",{onClick:()=>p(e),className:`flex items-center gap-3 p-4 rounded-[20px] border transition-all active:scale-95 ${m===e?"border-zinc-900 dark:border-white bg-zinc-900 dark:bg-white text-white dark:text-black":"border-zinc-100 dark:border-zinc-900 bg-zinc-50/50 dark:bg-zinc-900/50 hover:bg-zinc-100 dark:hover:bg-zinc-800"}`,children:[(0,a.jsx)("div",{className:`w-2 h-2 rounded-full ${m===e?"bg-white dark:bg-black":""}`,style:m!==e?{backgroundColor:t.color}:{}}),(0,a.jsx)("span",{className:"text-[14px] font-bold truncate",children:t.name}),m===e&&(0,a.jsx)(d,{className:"w-4 h-4 ml-auto"})]},e))})]})]}),(0,a.jsx)("button",{onClick:j,disabled:u,className:`w-full h-16 rounded-full font-bold text-lg flex items-center justify-center gap-3 transition-all active:scale-95 disabled:opacity-50 ${y?"bg-zinc-900 dark:bg-white text-white dark:text-black shadow-lg":"bg-zinc-100 dark:bg-zinc-900 text-zinc-400"}`,children:u?(0,a.jsx)(l,{className:"w-5 h-5 animate-spin"}):g?(0,a.jsx)(d,{className:"w-6 h-6"}):y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r,{className:"w-5 h-5"}),"Save Changes"]}):"Done"})]})})]})}e.s(["default",()=>x],33451)}]);