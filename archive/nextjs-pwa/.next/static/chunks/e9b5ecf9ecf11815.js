(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,55436,e=>{"use strict";let a=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>a],55436)},33451,e=>{"use strict";var a=e.i(43476),t=e.i(71645),r=e.i(20315),s=e.i(47163),l=e.i(75254);let i=(0,l.default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),n=(0,l.default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),d=(0,l.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),o=(0,l.default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var c=e.i(17927);function h({transaction:e,isOpen:l,onClose:h,onUpdate:g}){let[x,u]=(0,t.useState)(e?.category||"Other"),[m,b]=(0,t.useState)(!1),[p,y]=(0,t.useState)(!1);if((0,t.useEffect)(()=>{e&&(u(e.category),y(!1))},[e]),!l||!e)return null;e.type;let f=x!==e.category,k=async()=>{if(!f)return void h();if(b(!0),(0,c.isSupabaseConfigured)())try{let{error:a}=await c.supabase.from("transactions").update({category:x}).eq("id",e.id);if(a)throw a}catch(e){console.error("Error updating transaction:",e),b(!1);return}y(!0),g?.({...e,category:x}),setTimeout(()=>{b(!1),h()},500)};return(0,a.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-end justify-center sm:items-center p-0 sm:p-4",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-zinc-950/40 backdrop-blur-sm transition-opacity",onClick:h}),(0,a.jsx)("div",{className:"relative w-full max-w-lg bg-white dark:bg-zinc-950 rounded-t-[40px] sm:rounded-[40px] overflow-hidden shadow-2xl animate-fade-in-up",children:(0,a.jsxs)("div",{className:"p-8 pb-12 space-y-10",children:[(0,a.jsx)("div",{className:"w-12 h-1 bg-zinc-100 dark:bg-zinc-800 rounded-full mx-auto -mt-2 mb-4 sm:hidden"}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-6",children:[(0,a.jsx)("div",{className:"w-20 h-20 rounded-full bg-zinc-50 dark:bg-zinc-900 flex items-center justify-center border border-zinc-100 dark:border-zinc-800 shadow-sm transition-transform hover:scale-105 duration-300",children:(0,a.jsx)(n,{className:"w-10 h-10 text-zinc-900 dark:text-white"})}),(0,a.jsxs)("div",{className:"text-center space-y-1",children:[(0,a.jsx)("p",{className:"text-[17px] font-medium text-zinc-400",children:"Transaction details"}),(0,a.jsxs)("h2",{className:"text-[40px] font-bold tracking-tight",children:[(0,a.jsx)("span",{className:"text-[28px] align-top mr-1 font-semibold",children:r.CURRENCY_SYMBOL}),Math.abs(e.amount).toLocaleString("en-GH",{minimumFractionDigits:2})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-8 border-t border-zinc-50 dark:border-zinc-900 pt-8",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-[14px] font-medium text-zinc-400",children:"Date"}),(0,a.jsx)("p",{className:"text-[16px] font-bold",children:(0,s.formatFriendlyDate)(e.transaction_date)})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-[14px] font-medium text-zinc-400",children:"Merchant/Source"}),(0,a.jsx)("p",{className:"text-[16px] font-bold truncate",children:e.description||"Unknown"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-[14px] font-medium text-zinc-400",children:"Category"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(r.CATEGORIES).map(([e,t])=>(0,a.jsxs)("button",{onClick:()=>u(e),className:`flex items-center gap-3 p-4 rounded-[20px] border transition-all active:scale-95 ${x===e?"border-zinc-900 dark:border-white bg-zinc-900 dark:bg-white text-white dark:text-black":"border-zinc-100 dark:border-zinc-900 bg-zinc-50/50 dark:bg-zinc-900/50 hover:bg-zinc-100 dark:hover:bg-zinc-800"}`,children:[(0,a.jsx)("div",{className:`w-2 h-2 rounded-full ${x===e?"bg-white dark:bg-black":""}`,style:x!==e?{backgroundColor:t.color}:{}}),(0,a.jsx)("span",{className:"text-[14px] font-bold truncate",children:t.name}),x===e&&(0,a.jsx)(d,{className:"w-4 h-4 ml-auto"})]},e))})]})]}),(0,a.jsx)("button",{onClick:k,disabled:m,className:`w-full h-16 rounded-full font-bold text-lg flex items-center justify-center gap-3 transition-all active:scale-95 disabled:opacity-50 ${f?"bg-zinc-900 dark:bg-white text-white dark:text-black shadow-lg":"bg-zinc-100 dark:bg-zinc-900 text-zinc-400"}`,children:m?(0,a.jsx)(o,{className:"w-5 h-5 animate-spin"}):p?(0,a.jsx)(d,{className:"w-6 h-6"}):f?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i,{className:"w-5 h-5"}),"Save Changes"]}):"Done"})]})})]})}e.s(["default",()=>h],33451)},48680,e=>{"use strict";var a=e.i(43476),t=e.i(71645),r=e.i(75254);let s=(0,r.default)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]),l=(0,r.default)("headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]),i=(0,r.default)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);function n({title:e,subtitle:t}){return(0,a.jsx)("header",{className:"sticky top-0 z-30 bg-white/80 dark:bg-zinc-950/80 backdrop-blur-xl px-6 py-4 animate-fade-in-up border-b border-zinc-100 dark:border-zinc-900",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("button",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-white dark:bg-zinc-900 border border-zinc-100 dark:border-zinc-800 shadow-sm active:scale-95 transition-all",children:(0,a.jsx)(s,{className:"w-5 h-5"})}),e&&(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("h2",{className:"text-lg font-bold",children:e}),t&&(0,a.jsx)("p",{className:"text-xs text-zinc-400 font-medium",children:t})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("button",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-white dark:bg-zinc-900 border border-zinc-100 dark:border-zinc-800 shadow-sm active:scale-95 transition-all",children:(0,a.jsx)(l,{className:"w-5 h-5"})}),(0,a.jsxs)("button",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-white dark:bg-zinc-900 border border-zinc-100 dark:border-zinc-800 shadow-sm active:scale-95 transition-all relative",children:[(0,a.jsx)(i,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"absolute top-2.5 right-2.5 w-2 h-2 bg-red-500 rounded-full border-2 border-white dark:border-zinc-900"})]})]})]})})}var d=e.i(41828),o=e.i(33451),c=e.i(20315),h=e.i(17927),g=e.i(55436);let x=(0,r.default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),u=(0,r.default)("sliders-horizontal",[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]]);function m(){let[e,r]=(0,t.useState)([]),[s,l]=(0,t.useState)(!0),[i,c]=(0,t.useState)(null),[m,p]=(0,t.useState)(!1),[y,f]=(0,t.useState)(!1),[k,j]=(0,t.useState)(""),[v,w]=(0,t.useState)("all"),[N,z]=(0,t.useState)("all"),[M,S]=(0,t.useState)("all"),[C,T]=(0,t.useState)("date"),[D,A]=(0,t.useState)("desc"),[E,_]=(0,t.useState)(1);(0,t.useEffect)(()=>{O()},[]);let O=async()=>{if(l(!0),!(0,h.isSupabaseConfigured)()){r(b()),l(!1);return}try{let{data:e,error:a}=await h.supabase.from("transactions").select("*").order("transaction_date",{ascending:!1}).limit(500);if(a)throw a;r(e||[])}catch(e){console.error("Error fetching transactions:",e),r(b())}finally{l(!1)}},B=(0,t.useMemo)(()=>{let a=[...e];if(k){let e=k.toLowerCase();a=a.filter(a=>a.description?.toLowerCase().includes(e)||a.category?.toLowerCase().includes(e)||a.source?.toLowerCase().includes(e))}return"all"!==v&&(a=a.filter(e=>e.type===v)),"all"!==N&&(a=a.filter(e=>e.source===N)),"all"!==M&&(a=a.filter(e=>e.category===M)),a.sort((e,a)=>{if("date"!==C)return"desc"===D?a.amount-e.amount:e.amount-a.amount;{let t=new Date(e.transaction_date).getTime(),r=new Date(a.transaction_date).getTime();return"desc"===D?r-t:t-r}}),a},[e,k,v,N,M,C,D]),H=(0,t.useMemo)(()=>{let e=(E-1)*20;return B.slice(e,e+20)},[B,E]),L=Math.ceil(B.length/20),F=k||"all"!==v||"all"!==N||"all"!==M,I=[...new Set(e.map(e=>e.source))].filter(Boolean),G=[...new Set(e.map(e=>e.category))].filter(Boolean);return(0,a.jsxs)("div",{className:"min-h-screen pb-24 md:pb-8",children:[(0,a.jsx)(n,{title:"Transactions",subtitle:`${B.length} transactions`}),(0,a.jsxs)("main",{className:"px-4 md:px-6 py-6 space-y-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(g.Search,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search transactions...",value:k,onChange:e=>{j(e.target.value),_(1)},className:"w-full pl-12 pr-12 py-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-2xl focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all text-gray-900 dark:text-white placeholder-gray-400"}),k&&(0,a.jsx)("button",{onClick:()=>j(""),className:"absolute right-4 top-1/2 -translate-y-1/2 p-1 rounded-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:(0,a.jsx)(x,{className:"w-4 h-4 text-gray-500"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 overflow-x-auto pb-2 scrollbar-hide",children:[(0,a.jsxs)("button",{onClick:()=>f(!y),className:`flex-shrink-0 flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all ${y||F?"bg-emerald-500 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400"}`,children:[(0,a.jsx)(u,{className:"w-4 h-4"}),"Filters",F&&(0,a.jsx)("span",{className:"ml-1 w-5 h-5 flex items-center justify-center bg-white text-emerald-500 rounded-full text-xs font-bold",children:[k,"all"!==v,"all"!==N,"all"!==M].filter(Boolean).length})]}),["all","debit","credit"].map(e=>(0,a.jsx)("button",{onClick:()=>{w(e),_(1)},className:`flex-shrink-0 px-4 py-2 rounded-xl text-sm font-medium transition-all capitalize ${v===e?"credit"===e?"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-300":"debit"===e?"bg-rose-100 dark:bg-rose-900/30 text-rose-700 dark:text-rose-300":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300":"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400"}`,children:"all"===e?"All Types":"credit"===e?"Income":"Expenses"},e)),F&&(0,a.jsx)("button",{onClick:()=>{j(""),w("all"),z("all"),S("all"),T("date"),A("desc"),_(1)},className:"flex-shrink-0 px-4 py-2 rounded-xl text-sm font-medium bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:"Clear All"})]}),y&&(0,a.jsx)("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 space-y-4 animate-in slide-in-from-top-2",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Source"}),(0,a.jsxs)("select",{value:N,onChange:e=>{z(e.target.value),_(1)},className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500 text-gray-900 dark:text-white",children:[(0,a.jsx)("option",{value:"all",children:"All Sources"}),I.map(e=>(0,a.jsx)("option",{value:e,children:e.replace("_"," ")},e))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category"}),(0,a.jsxs)("select",{value:M,onChange:e=>{S(e.target.value),_(1)},className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500 text-gray-900 dark:text-white",children:[(0,a.jsx)("option",{value:"all",children:"All Categories"}),G.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sort By"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("select",{value:C,onChange:e=>T(e.target.value),className:"flex-1 px-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500 text-gray-900 dark:text-white",children:[(0,a.jsx)("option",{value:"date",children:"Date"}),(0,a.jsx)("option",{value:"amount",children:"Amount"})]}),(0,a.jsx)("button",{onClick:()=>A("desc"===D?"asc":"desc"),className:"px-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:"desc"===D?"↓":"↑"})]})]})]})}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-100 dark:border-gray-700 shadow-lg shadow-gray-200/50 dark:shadow-gray-900/50 p-4",children:[(0,a.jsx)(d.default,{transactions:H,onTransactionClick:e=>{c(e),p(!0)},showFilters:!0,loading:s}),L>1&&(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-6 pt-4 border-t border-gray-100 dark:border-gray-700",children:[(0,a.jsx)("button",{onClick:()=>_(e=>Math.max(1,e-1)),disabled:1===E,className:"px-4 py-2 rounded-xl bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 disabled:opacity-50 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Previous"}),(0,a.jsxs)("span",{className:"px-4 text-sm text-gray-600 dark:text-gray-400",children:["Page ",E," of ",L]}),(0,a.jsx)("button",{onClick:()=>_(e=>Math.min(L,e+1)),disabled:E===L,className:"px-4 py-2 rounded-xl bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 disabled:opacity-50 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Next"})]})]})]}),(0,a.jsx)(o.default,{transaction:i,isOpen:m,onClose:()=>{p(!1),c(null)},onUpdate:e=>{r(a=>a.map(a=>a.id===e.id?e:a))}})]})}function b(){let e=Object.keys(c.CATEGORIES),a=["MTN_MoMo","Vodafone_Cash","Bank"],t={"Food & Dining":["Lunch at restaurant","Grocery shopping","Coffee shop","Dinner delivery"],Transportation:["Uber ride","Fuel purchase","Taxi fare","Bus ticket"],Shopping:["Amazon purchase","Clothing store","Electronics shop","Online shopping"],"Utilities & Bills":["Electricity bill","Water bill","Internet subscription","Phone bill"],Entertainment:["Netflix subscription","Cinema tickets","Gaming purchase","Spotify"],Health:["Pharmacy purchase","Doctor visit","Gym membership","Health supplements"],Income:["Salary deposit","Freelance payment","Refund received","Gift received"],Transfers:["Bank transfer","Mobile money transfer","Sent to friend"],"Cash Withdrawal":["ATM withdrawal","Cash out"]},r=[],s=15e3;for(let l=0;l<100;l++){let i=Math.random()>.7,n=i?"Income":e[Math.floor(Math.random()*(e.length-1))],d=i?Math.floor(5e3*Math.random())+500:Math.floor(500*Math.random())+10;s=i?s+d:s-d;let o=t[n]||["Transaction"];r.push({id:`mock-${l}`,transaction_date:new Date(Date.now()-1e3*l*3600*Math.random()*48).toISOString(),amount:d,type:i?"credit":"debit",source:a[Math.floor(Math.random()*a.length)],description:o[Math.floor(Math.random()*o.length)],balance:s,category:n,raw_sms:"Sample SMS message for this transaction",created_at:new Date().toISOString()})}return r.sort((e,a)=>new Date(a.transaction_date).getTime()-new Date(e.transaction_date).getTime())}e.s(["default",()=>m],48680)}]);